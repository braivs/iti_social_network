{"version":3,"sources":["components/Sidebar/Sidebar.module.scss","redux/dialogs-reducer.ts","api/api.ts","components/Users/Users.module.scss","assets/images/ava.png","components/common/FormsControls/FormsControls.tsx","components/Sidebar/Friends/FriendItem/FriendItem.tsx","components/Sidebar/Friends/Friends.tsx","components/Sidebar/SidebarContainer.tsx","components/Sidebar/Sidebar.tsx","assets/images/sidebar/user.png","assets/images/sidebar/comment.png","assets/images/sidebar/group.png","assets/images/sidebar/newspaper.png","assets/images/sidebar/musical-note.png","assets/images/sidebar/settings.png","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","utils/object-helpers.ts","redux/users-reducer.ts","assets/images/user.png","components/Users/User.tsx","components/common/Paginator/Paginator.tsx","components/Users/Users.tsx","redux/users-selectors.ts","components/Users/UsersContainer.tsx","components/Header/Header.tsx","redux/auth-reducer.ts","components/Header/HeaderContainer.tsx","components/Login/Login.tsx","redux/app-reducer.ts","redux/sidebar-reducer.ts","redux/redux-store.ts","hoc/withSuspense.tsx","App.tsx","index.tsx","assets/images/preloader.svg","components/common/Preloader/Preloader.tsx","components/common/FormsControls/FormsControls.module.css","utils/validators/validators.ts","components/common/Paginator/Paginator.module.scss","components/Header/Header.module.css","components/Sidebar/Friends/FriendItem/FriendsItem.module.scss","redux/profile-reducer.ts"],"names":["module","exports","initialState","dialogs","id","name","messages","message","avatar","ava","dialogsReducer","state","action","type","body","newMessageBody","newMessage","Date","getTime","sendMessage","ResultCodesEnum","ResultCodeForCaptcha","instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","follow","userId","post","unfollow","delete","getProfile","console","warn","profileAPI","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","saveProfile","profile","authAPI","me","login","email","password","rememberMe","captcha","logout","securityAPI","getCaptchaUrl","FormControl","input","meta","touched","error","children","hasError","className","s","formControl","Textarea","props","restProps","Input","createField","placeholder","validators","component","text","validate","FriendItem","friendContainer","src","alt","Friends","useSelector","store","profilePage","FriendsElements","friends","map","f","friendsContainer","SidebarContainer","connect","sidebar","navbarContainer","nav","item","to","navLink","activeClassName","active","News","Music","Settings","updateObjectInArray","items","itemId","objPropName","newObjProps","u","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setUsers","setCurrentPage","toggleIsFetching","toggleFollowingProgress","followUnfollowFlow","dispatch","apiMethod","actionCreator","a","resultCode","User","user","followed","photos","small","userPhoto","disabled","some","onClick","Paginator","totalItemsCount","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","paginator","filter","p","cn","selectedPage","circle","Users","createSelector","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","pageNumber","requestUsers","this","Preloader","React","Component","compose","bind","count","totalCount","Header","header","logo","loginBlock","isAuth","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","getAuthUserData","Success","url","HeaderContainer","auth","LoginReduxForm","reduxForm","form","handleSubmit","onSubmit","required","style","formSummaryError","CaptchaRequired","length","stopSubmit","_error","initialized","globalError","rootReducer","combineReducers","profileReducer","dialogsPage","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","createStore","applyMiddleware","thunkMiddleware","withSuspense","Suspense","fallback","__store__","DialogsContainer","lazy","default","ProfileContainer","App","catchAllUnhandledErrors","promiseRejectionEvent","log","initializeApp","addEventListener","removeEventListener","exact","path","render","AppContainer","withRouter","promise","Promise","all","SamuraiJSApp","ReactDOM","document","getElementById","preloader","value","maxLengthCreator","maxLength","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","SAVE_PHOTO_SUCCESS","posts","likesCount","newPostText","newPost","newPostBody","postId","addPost","setStatus","getUserProfile","file","getState","messageText","beginIndex","indexOf","endIndex","fieldName","slice","toLowerCase","reject"],"mappings":"4GACAA,EAAOC,QAAU,CAAC,gBAAkB,iCAAiC,IAAM,qBAAqB,KAAO,sBAAsB,QAAU,yBAAyB,OAAS,wBAAwB,QAAU,yBAAyB,iBAAmB,oC,gICWnPC,EAAe,CACfC,QAAS,CACL,CAACC,GAAI,EAAGC,KAAM,SACd,CAACD,GAAI,EAAGC,KAAM,SACd,CAACD,GAAI,EAAGC,KAAM,QACd,CAACD,GAAI,EAAGC,KAAM,QACd,CAACD,GAAI,EAAGC,KAAM,SACd,CAACD,GAAI,EAAGC,KAAM,aAElBC,SAAU,CACN,CAACF,GAAI,EAAGG,QAAS,6BAA8BC,OAAQC,KACvD,CAACL,GAAI,EAAGG,QAAS,6BAA8BC,OAAQC,KACvD,CAACL,GAAI,EAAGG,QAAS,6BAA8BC,OAAQC,KACvD,CAACL,GAAI,EAAGG,QAAS,6BAA8BC,OAAQC,OAMlDC,EAAiB,WAAgF,IAA/EC,EAA8E,uDAAtET,EAAcU,EAAwD,uCACzG,GACS,iBADDA,EAAOC,KACX,CACI,IAAIC,EAAOF,EAAOG,eACZC,EAA0B,CAC5BZ,IAAI,IAAIa,MAAOC,UACfX,QAASO,EACTN,OAAQC,KAEZ,OAAO,2BACAE,GADP,IAEIL,SAAS,GAAD,mBAAMK,EAAML,UAAZ,CAAsBU,MAIlC,OAAOL,GAKNQ,EAAc,SAACJ,GAAD,MAA6B,CAACF,KAAM,eAAgBE,oB,gCCnD/E,8KA0EYK,EAMAC,EAhFZ,SAIMC,EAJN,OAIiBC,EAAMC,OAAO,CAC1BC,iBAAiB,EACjBC,QAAS,gDACTC,QAAS,CACL,UAAW,0CAINC,EAAW,CACpBC,SADoB,WACsC,IAAjDC,EAAgD,uDAA1B,EAAGC,EAAuB,uDAAJ,GACjD,OAAOT,EAASU,IAAT,qBAAyCF,EAAzC,kBAA8DC,IAChEE,MAAK,SAAAC,GACF,OAAOA,EAASC,SAG5BC,OAPoB,SAObC,GACH,OAAOf,EAASgB,KAAT,iBAAsCD,KAEjDE,SAVoB,SAUXF,GACL,OAAOf,EAASkB,OAAT,iBAAwCH,KAEnDI,WAboB,SAaTJ,GAEP,OADAK,QAAQC,KAAK,kDACNC,EAAWH,WAAWJ,KAIxBO,EAAa,CACtBH,WADsB,SACXJ,GACP,OAAOf,EAASU,IAAiB,WAAaK,IAElDQ,UAJsB,SAIZR,GACN,OAAOf,EAASU,IAAY,kBAAoBK,IAEpDS,aAPsB,SAOTC,GACT,OAAOzB,EAAS0B,IAAT,iBAA6C,CAACD,YAEzDE,UAVsB,SAUZC,GACN,IAAMC,EAAW,IAAIC,SAErB,OADAD,EAASE,OAAO,QAASH,GAClB5B,EAAS0B,IAAT,gBAAqDG,EAAU,CAClExB,QAAS,CACL,eAAgB,yBAGnBM,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAEnCmB,YApBsB,SAoBVC,GACR,OAAOjC,EAAS0B,IAAT,UAAwBO,KAI1BC,EAAU,CACnBC,GADmB,WAEf,OAAOnC,EAASU,IAAT,YAEX0B,MAJmB,SAIbC,EAAeC,GAAsE,IAApDC,EAAmD,wDAA/BC,EAA+B,uDAAN,KAChF,OAAOxC,EAASgB,KAAuC,aAAc,CAACqB,QAAOC,WAAUC,aAAYC,aAEvGC,OAPmB,WAQf,OAAOzC,EAASkB,OAAqB,gBAIhCwB,EAAc,CACvBC,cADuB,WAEnB,OAAO3C,EAASU,IAAT,+B,SAIHZ,O,qBAAAA,I,iBAAAA,I,uCAAAA,M,cAMAC,O,2CAAAA,M,0BC/EZrB,EAAOC,QAAU,CAAC,UAAY,yBAAyB,aAAe,4BAA4B,MAAQ,uB,4ECD3F,QAA0B,iC,wNCM5BiE,EAA2C,SAAC,GAA8C,EAA7CC,MAA8C,IAAD,IAAtCC,KAAOC,EAA+B,EAA/BA,QAASC,EAAsB,EAAtBA,MAAQC,EAAc,EAAdA,SAC/EC,EAAWH,GAAWC,EAC5B,OACI,sBAAKG,UAAWC,IAAEC,YAAc,KAAOH,EAAWE,IAAEJ,MAAQ,IAA5D,UACI,8BACKC,IAEJC,GAAY,+BAAOF,QAKnBM,EAAwC,SAACC,GAClD,IAAOV,EAAuBU,EAAvBV,MAAUW,EAAjB,YAA8BD,EAA9B,GACA,OAAO,cAACX,EAAD,2BAAiBW,GAAjB,aAAwB,gEAAcV,GAAWW,GAAeD,QAG9DE,EAAqC,SAACF,GAC/C,IAAOV,EAAuBU,EAAvBV,MAAUW,EAAjB,YAA8BD,EAA9B,GACA,OAAO,cAACX,EAAD,2BAAiBW,GAAjB,aAAwB,iDAAWV,GAAWW,QAI5CE,EAAc,SAACC,EACA5E,EACA6E,EACAC,GAHD,IAICN,EAJD,uDAIS,GACRO,EALD,uDAKQ,GALR,OAOvB,gCACI,cAAC,IAAD,aAAOH,YAAaA,EACb5E,KAAMA,EACNgF,SAAUH,EACVC,UAAWA,GACPN,IALf,IAMQO,O,gMCjCCE,EAAsC,SAACT,GAClD,OAAO,sBAAKJ,UAAWC,IAAEa,gBAAlB,UACL,qBAAKC,IAAKX,EAAMrE,OAAQiF,IAAI,GAAGhB,UAAWC,IAAElE,SAC3CqE,EAAMxE,SCAEqF,EAA8B,SAACb,GACxC,IAAMtB,EAAUoC,aAAkD,SAAAC,GAAK,OAAIA,EAAMC,YAAYtC,WACzFuC,EAAkBjB,EAAMkB,QAAQC,KAAI,SAAAC,GAAC,OAAI,cAAC,EAAD,CAAuB7F,GAAI6F,EAAE7F,GAAIC,KAAM4F,EAAE5F,KAAMG,OAAQyF,EAAEzF,QAAxCyF,EAAE7F,OAChE,OAAImD,EACO,8BACH,sBAAKkB,UAAWC,IAAEqB,QAAlB,UACI,yCACA,qBAAKtB,UAAWC,IAAEwB,iBAAlB,SAAqCJ,SAGnC,yBCLLK,EAAmBC,aANR,SAACzF,GACvB,MAAO,CACL0F,QAAS1F,EAAM0F,WAIaD,ECJmB,SAACvB,GAChD,OACI,sBAAKJ,UAAWC,IAAE4B,gBAAlB,UACI,sBAAK7B,UAAWC,IAAE6B,IAAlB,UACI,qBAAK9B,UAAWC,IAAE8B,KAAlB,SACI,eAAC,IAAD,CAASC,GAAG,WAAWhC,UAAWC,IAAEgC,QAASC,gBAAiBjC,IAAEkC,OAAhE,UACI,qBAAKpB,ICnBd,i4BDmB+BC,IAAI,KAD9B,eAIJ,qBAAKhB,UAAWC,IAAE8B,KAAlB,SACI,eAAC,IAAD,CAASC,GAAG,WAAWhC,UAAWC,IAAEgC,QAASC,gBAAiBjC,IAAEkC,OAAhE,UACI,qBAAKpB,IExBd,y2BFwB+BC,IAAI,KAD9B,eAIJ,qBAAKhB,UAAWC,IAAE8B,KAAlB,SACI,eAAC,IAAD,CAASC,GAAG,SAAShC,UAAWC,IAAEgC,QAASC,gBAAiBjC,IAAEkC,OAA9D,UACI,qBAAKpB,IG7Bd,q+BH6B6BC,IAAI,KAD5B,aAIJ,qBAAKhB,UAAWC,IAAE8B,KAAlB,SACI,eAAC,IAAD,CAASC,GAAG,QAAQhC,UAAWC,IAAEgC,QAASC,gBAAiBjC,IAAEkC,OAA7D,UACI,qBAAKpB,IIlCd,6vBJkC4BC,IAAI,KAD3B,YAIJ,qBAAKhB,UAAWC,IAAE8B,KAAlB,SACI,eAAC,IAAD,CAASC,GAAG,SAAShC,UAAWC,IAAEgC,QAASC,gBAAiBjC,IAAEkC,OAA9D,UACI,qBAAKpB,IKvCd,yuBLuC6BC,IAAI,KAD5B,aAIJ,qBAAKhB,UAAWC,IAAE8B,KAAlB,SACI,eAAC,IAAD,CAASC,GAAG,YAAYhC,UAAWC,IAAEgC,QAASC,gBAAiBjC,IAAEkC,OAAjE,UACI,qBAAKpB,IM5Cd,qyBN4CgCC,IAAI,KAD/B,mBAKR,cAAC,EAAD,CAASM,QAASlB,EAAMwB,QAAQN,gBO9C/Bc,EAAO,WAClB,OACE,kDCFSC,EAAQ,WACnB,OACE,kDCFSC,EAAW,WACtB,OACE,kD,+CCHSC,EAAsB,SAACC,EAAYC,EAAaC,EAAkBC,GAC3E,OAAOH,EAAMjB,KAAI,SAACqB,GACd,OAAIA,EAAEF,KAAiBD,EACZ,2BAAIG,GAAMD,GAEdC,MCDTnH,EAAe,CACjBoH,MAAO,GACPvF,SAAU,GACVwF,gBAAiB,EACjBzF,YAAa,EACb0F,YAAY,EACZC,oBAAqB,IA0CZC,EAAgB,SAACrF,GAAD,MAAqB,CAACxB,KAAM,SAAUwB,WACtDsF,EAAkB,SAACtF,GAAD,MAAqB,CAACxB,KAAM,WAAYwB,WAC1DuF,EAAW,SAACN,GAAD,MAA6B,CAACzG,KAAM,YAAayG,UAC5DO,EAAiB,SAAC/F,GAAD,MAA0B,CAACjB,KAAM,mBAAoBiB,gBAKtEgG,EAAmB,SAACN,GAAD,MAA0B,CAAC3G,KAAM,qBAAsB2G,eAC1EO,EAA0B,SAACP,EAAqBnF,GAAtB,MAA0C,CAC7ExB,KAAM,+BACN2G,aACAnF,WAgBE2F,EAAkB,uCAAG,WAAOC,EAAsC5F,EAAgB6F,EAAgBC,GAA7E,SAAAC,EAAA,6DACvBH,EAASF,GAAwB,EAAM1F,IADhB,SAEF6F,EAAU7F,GAFR,OAIU,IAJV,OAIVF,KAAKkG,YACdJ,EAASE,EAAc9F,IAE3B4F,EAASF,GAAwB,EAAO1F,IAPjB,2CAAH,4D,QCjFT,MAA0B,iC,kBCsB5BiG,EAAgC,SAAC,GAA6D,IAA5DC,EAA2D,EAA3DA,KAAMC,EAAqD,EAArDA,SAAUf,EAA2C,EAA3CA,oBAAqBlF,EAAsB,EAAtBA,SAAUH,EAAY,EAAZA,OAC1F,OAAQ,8BACJ,gCACI,gCACI,8BACI,cAAC,IAAD,CAASqE,GAAI,YAAc8B,EAAKnI,GAAhC,SACI,qBAAKoF,IAA2B,OAAtB+C,EAAKE,OAAOC,MAAiBH,EAAKE,OAAOC,MAAQC,EAAWlD,IAAK,YACtEhB,UAAWC,IAAEiE,gBAG1B,8BACKH,EACK,wBAAQI,SAAUnB,EACfoB,MAAK,SAACzI,GAAD,OAAgBA,IAAOmI,EAAKnI,MAAK0I,QAAS,WAChDvG,EAASgG,EAAKnI,KAFhB,sBAIA,wBAAQwI,SAAUnB,EAAoBoB,MAAK,SAACzI,GAAD,OAAgBA,IAAOmI,EAAKnI,MAAK0I,QAAS,WACnF1G,EAAOmG,EAAKnI,KADd,yBAKd,8BACI,gCACI,8BAAMmI,EAAKlI,OACX,8BAAMkI,EAAKxF,SACX,uCAAUwF,EAAKnI,aAvBjBmI,EAAKnI,O,mDCZV2I,EAAiC,SAAC,GAW3C,IALkD,IALHC,EAKE,EALFA,gBACAjH,EAIE,EAJFA,SACAD,EAGE,EAHFA,YACAmH,EAEE,EAFFA,cAEE,IADFC,mBACE,MADY,GACZ,EAE7CC,EAAaC,KAAKC,KAAKL,EAAkBjH,GAEzCuH,EAAQ,GACHC,EAAI,EAAGA,GAAKJ,EAAYI,IAC7BD,EAAME,KAAKD,GAGf,IAAIE,EAAeL,KAAKC,KAAKF,EAAaD,GAC1C,EAAwCQ,mBAAS,GAAjD,mBAAKC,EAAL,KAAoBC,EAApB,KACIC,GAAyBF,EAAgB,GAAKT,EAAc,EAC5DY,EAAyBH,EAAgBT,EAE7C,OAAO,sBAAKzE,UAAWC,IAAEqF,UAAlB,UACFJ,EAAgB,GACb,wBAAQb,QAAS,WACbc,EAAiBD,EAAgB,IADrC,mBAIHL,EACIU,QAAO,SAAAC,GAAC,OAAIA,GAAKJ,GAAyBI,GAAKH,KAC/C9D,KAAI,SAACiE,GACF,OAAO,sBAAcxF,UAAWyF,IAAG,eAAExF,IAAEyF,aAAerI,IAAgBmI,GAAIvF,IAAE0F,QAChEtB,QAAS,WACLG,EAAcgB,IAFvB,SAGSA,GAHEA,MAKzBR,EAAeE,GACZ,wBAAQb,QAAS,WACbc,EAAiBD,EAAgB,IADrC,sB,uECpCCU,EAAuC,SAAC,GAOO,IANHvI,EAME,EANFA,YACAyF,EAKE,EALFA,gBACAxF,EAIE,EAJFA,SACAkH,EAGE,EAHFA,cACA3B,EAEE,EAFFA,MACGzC,EACD,iBACvD,OAAO,gCACH,cAAC,EAAD,CAAW/C,YAAaA,EAAamH,cAAeA,EAAgBlH,SAAUA,EACnEiH,gBAAiBzB,IAC5B,8BAEQD,EAAMtB,KAAI,SAAAqB,GAAC,OAAI,cAAC,EAAD,CACMkB,KAAMlB,EACNI,oBAAqB5C,EAAM4C,oBAC3Be,SAAUnB,EAAEmB,SACZjG,SAAUsC,EAAMtC,SAChBH,OAAQyC,EAAMzC,QALTiF,EAAEjH,a,4BCjB/ByB,GAAWyI,cAJC,SAAC3J,GACtB,OAAOA,EAAM4J,UAAUjD,SAIvB,SAACA,GACD,OAAOA,EAAM0C,QAAO,SAAA3C,GAAC,OAAI,QAGhBmD,GAAc,SAAC7J,GACxB,OAAOA,EAAM4J,UAAUxI,UAEd0I,GAAqB,SAAC9J,GAC/B,OAAOA,EAAM4J,UAAUhD,iBAEdmD,GAAiB,SAAC/J,GAC3B,OAAOA,EAAM4J,UAAUzI,aAEd6I,GAAgB,SAAChK,GAC1B,OAAOA,EAAM4J,UAAU/C,YAEdoD,GAAyB,SAACjK,GACnC,OAAOA,EAAM4J,UAAU9C,qBCuBrBoD,G,4MAMF5B,cAAgB,SAAC6B,GACb,IAAO/I,EAAY,EAAK8C,MAAjB9C,SACP,EAAK8C,MAAMkG,aAAaD,EAAY/I,I,uDAPxC,WACI,MAAgCiJ,KAAKnG,MAA9B/C,EAAP,EAAOA,YAAaC,EAApB,EAAoBA,SACpBiJ,KAAKnG,MAAMkG,aAAajJ,EAAaC,K,oBAQzC,WACI,OAAO,qCACFiJ,KAAKnG,MAAM2C,WAAa,cAACyD,GAAA,EAAD,IAAe,KACxC,cAAC,EAAD,CAAO1D,gBAAiByD,KAAKnG,MAAM0C,gBAC5BxF,SAAUiJ,KAAKnG,MAAM9C,SACrBD,YAAakJ,KAAKnG,MAAM/C,YACxBmH,cAAe+B,KAAK/B,cACpB3B,MAAO0D,KAAKnG,MAAMyC,MAClBlF,OAAQ4I,KAAKnG,MAAMzC,OACnBG,SAAUyI,KAAKnG,MAAMtC,SACrBkF,oBAAqBuD,KAAKnG,MAAM4C,6B,GArBtByD,IAAMC,WAuCpBC,gBACXhF,aAboB,SAACzF,GACrB,MAAO,CACH2G,MAAOzF,GAASlB,GAChBoB,SAAUyI,GAAY7J,GACtB4G,gBAAiBkD,GAAmB9J,GACpCmB,YAAa4I,GAAe/J,GAC5B6G,WAAYmD,GAAchK,GAC1B8G,oBAAqBmD,GAAuBjK,MAO5C,CAACyB,ONEa,SAACC,GACnB,8CAAO,WAAO4F,GAAP,SAAAG,EAAA,sDACHJ,EAAmBC,EAAU5F,EAAQT,IAASQ,OAAOiJ,KAAKzJ,KAAW8F,GADlE,2CAAP,uDMHanF,SNQO,SAACF,GACrB,8CAAO,WAAO4F,GAAP,SAAAG,EAAA,sDACHJ,EAAmBC,EAAU5F,EAAQT,IAASW,SAAS8I,KAAKzJ,KAAW+F,GADpE,2CAAP,uDMTuBC,WAAUC,iBAAgBE,0BAAyBgD,aNrBlD,SAACjJ,EAAqBC,GAC9C,8CAAO,WAAOkG,GAAP,eAAAG,EAAA,6DACHH,EAASH,GAAiB,IAC1BG,EAASJ,EAAe/F,IAFrB,SAIcF,IAASC,SAASC,EAAaC,GAJ7C,OAICI,EAJD,OAKH8F,EAASH,GAAiB,IAC1BG,EAASL,EAASzF,EAAK8E,QACvBgB,EAnBwD,CAC5DpH,KAAM,wBACNyK,MAiBgCnJ,EAAKoJ,aAP9B,2CAAP,yDMkBWH,CAGbP,I,oBCpFWW,GAAoC,SAAC3G,GAC9C,OAAO,yBAAQJ,UAAWC,KAAE+G,OAArB,UAEH,qBAAKhH,UAAWC,KAAEgH,KAAlB,uBACA,qBAAKjH,UAAWC,KAAEiH,WAAlB,SACK9G,EAAM+G,OACD,gCAAM/G,EAAMnB,MAAZ,MAAqB,wBAAQoF,QAASjE,EAAMd,OAAvB,wBACrB,cAAC,IAAD,CAAS0C,GAAI,SAAb,SACE,mD,SCRdvG,GAAe,CACjBE,GAAI,KACJuD,MAAO,KACPD,MAAO,KACPkI,QAAQ,EACRC,WAAY,MAoBHC,GAAkB,SAAC1L,EAAmBsD,EAAsBC,EAAsBiI,GAAhE,MAAqF,CAChH/K,KAAM,gCAAiCkL,QAAS,CAAC3L,KAAIsD,QAAOC,QAAOiI,YAG1DI,GAAuB,SAACH,GAAD,MAAyB,CACzDhL,KAAM,0CAA2CkL,QAAS,CAACF,gBAGlDI,GAAkB,yDAAM,WAAOhE,GAAP,uBAAAG,EAAA,sEACZ5E,IAAQC,KADI,QAC7BvB,EAD6B,QAGpBC,KAAKkG,aAAejH,IAAgB8K,UAAU,EAC9BhK,EAASC,KAAKA,KAAlC/B,EADiD,EACjDA,GAAIsD,EAD6C,EAC7CA,MAAOC,EADsC,EACtCA,MAChBsE,EAAS6D,GAAgB1L,EAAIsD,EAAOC,GAAO,KALd,2CAAN,uDAsBlBM,GAAgB,yDAAiB,WAAOgE,GAAP,iBAAAG,EAAA,sEACnBpE,IAAYC,gBADO,OACpC/B,EADoC,OAEpC2J,EAAa3J,EAASC,KAAKgK,IACjClE,EAAS+D,GAAqBH,IAHY,2CAAjB,uDC9CvBO,G,4JAEJ,WACE,OAAO,cAAC,GAAD,eAAYpB,KAAKnG,Y,GAHEqG,IAAMC,WAYrB/E,gBALS,SAACzF,GAAD,MAAiD,CACvEiL,OAAQjL,EAAM0L,KAAKT,OACnBlI,MAAO/C,EAAM0L,KAAK3I,SAGoB,CAACK,ODwCnB,yDAAiB,WAAOkE,GAAP,SAAAG,EAAA,sEACd5E,IAAQO,SADM,OAEF,IAFE,OAEtB5B,KAAKkG,YACdJ,EAAS6D,GAAgB,KAAM,KAAM,MAAM,IAHZ,2CAAjB,wDCxCP1F,CAAmCgG,I,gDCuB5CE,GAAiBC,aAA+B,CAACC,KAAM,SAAtCD,EA/B6C,SAAC,GAA2B,IAA1BE,EAAyB,EAAzBA,aAAcnI,EAAW,EAAXA,MAE1EuH,EAAalG,aAA6C,SAAAhF,GAAK,OAAIA,EAAM0L,KAAKR,cAEpF,OACI,uBAAMa,SAAUD,EAAhB,UAEKzH,aAAY,QAAS,QAAS,CAAC2H,MAAW5H,MAC1CC,aAAY,WAAY,WAAY,CAAC2H,MAAW5H,KAAO,CAAClE,KAAM,aAC9DmE,aAAY,KAAM,aAAc,GAAID,KAAO,CAAClE,KAAM,YAAa,eAE/DgL,GAAc,qBAAKrG,IAAKqG,EAAYpG,IAAK,eACzCoG,GAAc7G,aAAY,qBAAsB,UAAW,CAAC2H,MAAW5H,KAAO,IAE9ET,GAAS,qBAAKG,UAAWmI,KAAMC,iBAAtB,SACLvI,IAGL,8BACI,mDAkCD8B,gBALS,SAACzF,GAAD,MAAiD,CACrEkL,WAAYlL,EAAM0L,KAAKR,WACvBD,OAAQjL,EAAM0L,KAAKT,UAGiB,CAAClI,MFxBpB,SAACC,EAAeC,EAAkBC,EAAqBC,GAAvD,8CAA6F,WAAOmE,GAAP,iBAAAG,EAAA,sEACzF5E,IAAQE,MAAMC,EAAOC,EAAUC,EAAYC,GAD8C,QAC1G5B,EAD0G,QAEjGC,KAAKkG,aAAejH,IAAgB8K,QAC7CjE,EAASgE,OAEL/J,EAASC,KAAKkG,aAAejH,IAAgB0L,iBAC7C7E,EAAShE,MAET1D,EAAU2B,EAASC,KAAK7B,SAASyM,OAAS,EAAI7K,EAASC,KAAK7B,SAAS,GAAK,aAC9E2H,EAAS+E,aAAW,QAAS,CAACC,OAAQ1M,MAToE,2CAA7F,wDEwBN6F,EApBoB,SAACvB,GAKhC,OAAIA,EAAM+G,OACC,cAAC,IAAD,CAAUnF,GAAI,aAGlB,gCACH,uCACA,cAAC6F,GAAD,CAAgBI,SAVH,SAACvJ,GACd0B,EAAMnB,MAAMP,EAASQ,MAAOR,EAASS,SAAUT,EAASU,WAAYV,EAASW,kBC3C/E5D,GAAiC,CACnCgN,aAAa,EACbC,YAAa,M,4BCNbjN,GAAe,CACjB6F,QAAS,CACP,CAAE3F,GAAI,EAAGC,KAAM,OAAQG,OAAQC,MAC/B,CAAEL,GAAI,EAAGC,KAAM,QAASG,OAAQC,MAChC,CAAEL,GAAI,EAAGC,KAAM,QAASG,OAAQC,Q,oBCC9B2M,GAAcC,aAAgB,CAChCxH,YAAayH,KACbC,YAAa7M,KACb2F,QDE0B,WAAgF,IAA/E1F,EAA8E,uDAAtET,GAErC,OAAOS,GCHL4J,UbAwB,WAAuE,IAAtE5J,EAAqE,uDAA7DT,EAAcU,EAA+C,uCAC9F,OAAQA,EAAOC,MACX,IAAK,SACD,OAAO,2BACAF,GADP,IAEI2G,MAAON,EAAoBrG,EAAM2G,MAAO1G,EAAOyB,OAAQ,KAAM,CAACmG,UAAU,MAEhF,IAAK,WACD,OAAO,2BACA7H,GADP,IAEI2G,MAAON,EAAoBrG,EAAM2G,MAAO1G,EAAOyB,OAAQ,KAAM,CAACmG,UAAU,MAEhF,IAAK,YACD,OAAO,2BAAI7H,GAAX,IAAkB2G,MAAO1G,EAAO0G,QAEpC,IAAK,mBACD,OAAO,2BAAI3G,GAAX,IAAkBmB,YAAalB,EAAOkB,cAE1C,IAAK,wBACD,OAAO,2BAAInB,GAAX,IAAkB4G,gBAAiB3G,EAAO0K,QAE9C,IAAK,qBACD,OAAO,2BAAI3K,GAAX,IAAkB6G,WAAY5G,EAAO4G,aAEzC,IAAK,+BACD,OAAO,2BACA7G,GADP,IAEI8G,oBAAqB7G,EAAO4G,WAAP,sBACX7G,EAAM8G,qBADK,CACgB7G,EAAOyB,SACtC1B,EAAM8G,oBAAoBuC,QAAO,SAAA5J,GAAE,OAAIA,IAAOQ,EAAOyB,YAGnE,QACI,OAAO1B,IahCf0L,KLDuB,WAAsE,IAArE1L,EAAoE,uDAA5DT,GAAcU,EAA8C,uCAC5F,OAAQA,EAAOC,MACX,IAAK,0CACL,IAAK,gCAED,OAAO,2BACAF,GACAC,EAAOmL,SAGlB,QACI,OAAOpL,IKTf6L,KAAMgB,KACNC,IFFsB,WAAoE,IAAnE9M,EAAkE,uDAA3DT,GAAcU,EAA6C,uCACzF,MACS,wBADDA,EAAOC,KAEA,2BACAF,GADP,IAEIuM,aAAa,IAIVvM,KEHb+M,GAAmBC,OAAOC,sCAAwCxC,KAE3DxF,GAAQiI,aAAYT,GAAaM,GAAiBI,aAAgBC,QCtBxE,SAASC,GAAa7C,GAEzB,OAAO,SAACtG,GACJ,OAAO,cAAC,IAAMoJ,SAAP,CAAgBC,SAAU,cAACjD,GAAA,EAAD,IAA1B,SACH,cAACE,EAAD,eAAetG,ODsB3B8I,OAAOQ,UAAYvI,GEZnB,IAAMwI,GAAmBlD,IAAMmD,MAAK,kBAChC,8BACKpM,MAAK,kBAAyB,CAACqM,QAA1B,EAAEF,wBAEVG,GAAmBrD,IAAMmD,MAAK,kBAAM,iCAWpCG,G,4MAEFC,wBAA0B,SAACC,GACvBhM,QAAQiM,IAAI,gCAAiC,wB,uDAIjD,WACI3D,KAAKnG,MAAM+J,gBACXjB,OAAOkB,iBAAiB,qBAAsB7D,KAAKyD,2B,kCAEvD,WACId,OAAOmB,oBAAoB,qBAAsB9D,KAAKyD,2B,oBAG1D,WACI,OAAKzD,KAAKnG,MAAMqI,YAIZ,qBAAKzI,UAAW,OAAhB,SACI,sBAAKA,UAAW,cAAhB,UACI,cAAC,GAAD,IACA,cAAC0B,EAAD,IACA,qBAAK1B,UAAW,sBAAhB,SACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOsK,OAAK,EAACC,KAAK,IAAIC,OAAQ,kBAAM,cAAC,IAAD,CAAUxI,GAAI,gBAClD,cAAC,IAAD,CAAOuI,KAAK,WAAWC,OAAQjB,GAAaI,MAC5C,cAAC,IAAD,CAAOY,KAAK,oBAAoBC,OAAQjB,GAAaO,MACrD,cAAC,IAAD,CAAOS,KAAK,QAAQC,OAAQ,kBAAM,cAAC,EAAD,OAClC,cAAC,IAAD,CAAOD,KAAK,SAASC,OAAQ,kBAAM,cAAC,EAAD,OACnC,cAAC,IAAD,CAAOD,KAAK,YAAYC,OAAQ,kBAAM,cAAC,EAAD,OACtC,cAAC,IAAD,CAAOD,KAAK,SAASC,OAAQ,kBAAM,cAAC,GAAD,OACnC,cAAC,IAAD,CAAOD,KAAK,SAASC,OAAQ,kBAAM,cAAC,GAAD,OACnC,cAAC,IAAD,CAAOD,KAAK,IAAIC,OAAQ,kBAAM,6DAjBvC,cAAChE,GAAA,EAAD,Q,GAjBDC,IAAMC,WA+CpB+D,GAAe9D,aACf+D,IACA/I,aANoB,SAACzF,GAAD,MAA8B,CAClDuM,YAAavM,EAAM8M,IAAIP,eAKE,CAAC0B,cJjDD,kBAAiB,SAAC3G,GAC3C,IAAImH,EAAUnH,EAASgE,MACvBoD,QAAQC,IAAI,CAACF,IACRnN,MAAK,WACFgG,EAN6B,CAACpH,KAAM,+BIiD7BuK,CAE4BoD,IAUhCe,GARM,WACjB,OAAO,cAAC,IAAD,UACH,cAAC,IAAD,CAAU3J,MAAOA,GAAjB,SACI,cAACsJ,GAAD,SCjFZM,IAASP,OAAO,cAAC,GAAD,IAAkBQ,SAASC,eAAe,U,kECL3C,UAA0B,sC,cCG5BzE,EAAY,WACvB,OAAO,8BACL,qBAAKzF,IAAKmK,EAAWlK,IAAK,kB,mBCJ9BzF,EAAOC,QAAU,CAAC,YAAc,mCAAmC,MAAQ,6BAA6B,iBAAmB,wCAAwC,WAAa,oC,gCCChL,oEAAO,IAAM0M,EAA+B,SAACiD,GAC3C,IAAIA,EAEJ,MAAO,qBAGIC,EAAmB,SAACC,GAAD,OAA2C,SAACF,GAC1E,GAAIA,EAAM7C,OAAS+C,EAAW,MAAM,iBAAN,OAAwBA,EAAxB,e,mBCRhC9P,EAAOC,QAAU,CAAC,UAAY,6BAA6B,OAAS,0BAA0B,aAAe,kC,mBCA7GD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,KAAO,qBAAqB,WAAa,6B,mBCA3FD,EAAOC,QAAU,CAAC,gBAAkB,qCAAqC,OAAS,8B,iVCM5E8P,EAAW,WACXC,EAAmB,mBACnBC,EAAa,aACbC,EAAc,cACdC,EAAqB,qBAQvBjQ,EAAe,CACfkQ,MAAO,CACH,CAAChQ,GAAI,EAAGG,QAAS,6BAA8B8P,WAAY,IAC3D,CAACjQ,GAAI,EAAGG,QAAS,qBAAuB8P,WAAY,IACpD,CAACjQ,GAAI,EAAGG,QAAS,SAAU8P,WAAY,GACvC,CAACjQ,GAAI,EAAGG,QAAS,OAAQ8P,WAAY,IAEzC9M,QAAS,GACTR,OAAQ,GACRuN,YAAa,IAKJhD,EAAiB,WAAgF,IAA/E3M,EAA8E,uDAAtET,EAAcU,EAAwD,uCACzG,OAAQA,EAAOC,MACX,KAAKkP,EACD,IAAMQ,EAAqB,CACvBnQ,IAAI,IAAIa,MAAOC,UACfX,QAASK,EAAO4P,YAChBH,WAAY,GAEhB,OAAO,2BACA1P,GADP,IAEIyP,MAAM,GAAD,mBAAMzP,EAAMyP,OAAZ,CAAmBG,IACxBD,YAAa,KAGrB,KAAKN,EACD,OAAO,2BACArP,GADP,IAEI4C,QAAS3C,EAAO2C,UAGxB,KAAK0M,EACD,OAAO,2BACAtP,GADP,IAEIoC,OAAQnC,EAAOmC,SAGvB,KAAKmN,EACD,OAAO,2BAAIvP,GAAX,IAAkByP,MAAOzP,EAAMyP,MAAMpG,QAAO,SAAAC,GAAC,OAAIA,EAAE7J,IAAMQ,EAAO6P,YACpE,KAAKN,EACD,OAAO,2BAAIxP,GAAX,IAAkB4C,QAAQ,2BAAK5C,EAAM4C,SAAZ,IAAqBkF,OAAQ7H,EAAO6H,WACjE,QACI,OAAO9H,IAKN+P,EAAU,SAACF,GAAD,MAA0B,CAAC3P,KAAMkP,EAAUS,gBAErDG,EAAY,SAAC5N,GAAD,MAAqB,CAAClC,KAAMoP,EAAYlN,WAKpD6N,EAAiB,SAACvO,GAAD,8CAA2B,WAAO4F,GAAP,eAAAG,EAAA,sEAChCxG,IAASa,WAAWJ,GADY,OACjDH,EADiD,OAErD+F,GAR2B1E,EAQHrB,EAASC,KARoB,CAACtB,KAAMmP,EAAkBzM,aAMzB,iCAN3B,IAACA,IAM0B,OAA3B,uDAKjBV,EAAY,SAACR,GAAD,8CAAoB,WAAO4F,GAAP,eAAAG,EAAA,sEACpBxF,IAAWC,UAAUR,GADD,OACrCH,EADqC,OAEzC+F,EAAS0I,EAAUzO,EAASC,OAFa,2CAApB,uDAKZW,EAAe,SAACC,GAAD,8CAAoB,WAAOkF,GAAP,SAAAG,EAAA,+EAEnBxF,IAAWE,aAAaC,GAFL,OAGP,IAHO,OAG3BZ,KAAKkG,YACdJ,EAAS0I,EAAU5N,IAJiB,uGAApB,uDAafE,EAAY,SAAC4N,GAAD,8CAAgB,WAAO5I,GAAP,eAAAG,EAAA,sEAChBxF,IAAWK,UAAU4N,GADL,OAGT,KAFxB3O,EADiC,QAGxBmG,YACTJ,GA9ByBQ,EA8BCvG,EAASC,KAAKsG,OA9BS,CAAC5H,KAAMsP,EAAoB1H,YA0B3C,iCA1BT,IAACA,IA0BQ,OAAhB,uDASZnF,EAAc,SAACC,GAAD,8CAAoC,WAAO0E,EAAU6I,GAAjB,yBAAA1I,EAAA,6DACrD/F,EAASyO,IAAWzE,KAAKjM,GAD4B,SAEpCwC,IAAWU,YAAYC,GAFa,UAI1B,KAF3BrB,EAFqD,QAI9CC,KAAKkG,WAJyC,gBAKvDJ,EAAS2I,EAAevO,IAL+B,8BAOjD0O,EAAc7O,EAASC,KAAK7B,SAAS,GACrC0Q,EAAaD,EAAYE,QAAQ,KACjCC,EAAWH,EAAYE,QAAQ,KAC/BE,EAAYJ,EAAYK,MAAMJ,EAAa,EAAEE,GAAUG,cAE7DpJ,EAAS+E,YAAW,eAAgB,CAAE,SAAW,eAAGmE,EAAYJ,MAZT,kBAahD1B,QAAQiC,OAAOpP,EAASC,KAAK7B,SAAS,KAbU,4CAApC,2D","file":"static/js/main.8a4b81d6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbarContainer\":\"Sidebar_navbarContainer__ufyZh\",\"nav\":\"Sidebar_nav__3JYpr\",\"item\":\"Sidebar_item__2A-p9\",\"navLink\":\"Sidebar_navLink__1tLgI\",\"active\":\"Sidebar_active__1olf-\",\"friends\":\"Sidebar_friends__p4LGN\",\"friendsContainer\":\"Sidebar_friendsContainer__lXITY\"};","import ava from '../assets/images/ava.png'\r\n\r\nexport type DialogType = {\r\n    id: number\r\n    name: string\r\n}\r\nexport type MessageType = {\r\n    id: number\r\n    message: string\r\n    avatar: string\r\n}\r\n\r\nlet initialState = {\r\n    dialogs: [\r\n        {id: 1, name: 'BriWS'},\r\n        {id: 2, name: 'Masha'},\r\n        {id: 3, name: 'Lera'},\r\n        {id: 4, name: 'Liza'},\r\n        {id: 5, name: 'Diana'},\r\n        {id: 6, name: 'Kristina'}\r\n    ] as Array<DialogType>,\r\n    messages: [\r\n        {id: 1, message: 'Lorem ipsum dolor sit amet', avatar: ava},\r\n        {id: 2, message: 'Lorem ipsum dolor sit amet', avatar: ava},\r\n        {id: 3, message: 'Lorem ipsum dolor sit amet', avatar: ava},\r\n        {id: 4, message: 'Lorem ipsum dolor sit amet', avatar: ava}\r\n    ] as Array<MessageType>\r\n}\r\n\r\nexport type InitialStateDialogsType = typeof initialState\r\n\r\nexport const dialogsReducer = (state = initialState, action: DialogsActionTypes): InitialStateDialogsType => {\r\n    switch (action.type) {\r\n        case 'SEND-MESSAGE': {\r\n            let body = action.newMessageBody;\r\n            const newMessage: MessageType = {\r\n                id: new Date().getTime(),\r\n                message: body,\r\n                avatar: ava\r\n            };\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, newMessage]\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n// Action Creators:\r\nexport const sendMessage = (newMessageBody: string) => ({type: 'SEND-MESSAGE', newMessageBody} as const)\r\n\r\nexport type DialogsActionTypes = ReturnType<typeof sendMessage>\r\n\r\n","import axios from \"axios\";\r\nimport {ProfileType, UserType} from \"../types/types\";\r\nimport {ResponseFilePhotoType} from \"../redux/profile-reducer\";\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        'API-KEY': '36c47461-cd5e-48a2-a6d3-2dd87b11456f'\r\n    }\r\n});\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage: number = 1, pageSize: number = 10) {\r\n        return instance.get<GetUsersType>(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => {\r\n                return response.data;\r\n            })\r\n    },\r\n    follow(userId: number) {\r\n        return instance.post<ResponseType>(`follow/${userId}`)\r\n    },\r\n    unfollow(userId: number) {\r\n        return instance.delete<ResponseType>(`follow/${userId}`)\r\n    },\r\n    getProfile(userId: number | null) {\r\n        console.warn('Obsolete method. Please use profileAPI object.')\r\n        return profileAPI.getProfile(userId)\r\n    },\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number | null) {\r\n        return instance.get<ProfileType>(`profile/` + userId);\r\n    },\r\n    getStatus(userId: string) {\r\n        return instance.get<string>(`profile/status/` + userId);\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put<ResponseType>(`profile/status`, {status});\r\n    },\r\n    savePhoto(photoFile: File) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", photoFile);\r\n        return instance.put<ResponseFilePhotoType>(`profile/photo`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n            .then(response => response.data)\r\n    },\r\n    saveProfile(profile: ProfileType) {\r\n        return instance.put(`profile`, profile);\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get<ResponseType<{ id: number, email: string, login: string }>>(`auth/me`)\r\n    },\r\n    login(email: string, password: string, rememberMe = false, captcha: string | null = null) {\r\n        return instance.post<ResponseType<{ userId: number }>>('auth/login', {email, password, rememberMe, captcha})\r\n    },\r\n    logout() {\r\n        return instance.delete<ResponseType>('auth/login')\r\n    },\r\n}\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get<CaptchaResponseType>(`security/get-captcha-url`)\r\n    },\r\n}\r\n\r\nexport enum ResultCodesEnum {\r\n    Success = 0,\r\n    Error = 1,\r\n    CaptchaRequired = 10\r\n}\r\n\r\nexport enum ResultCodeForCaptcha {\r\n    CaptchaIsRequired = 10\r\n}\r\n\r\ntype ResponseType<D = {}> = {\r\n    fieldsErrors: Array<string>\r\n    resultCode: number\r\n    messages: Array<string>\r\n    data: D\r\n}\r\ntype GetUsersType = {\r\n    error: string\r\n    items: Array<UserType>\r\n    totalCount: number\r\n}\r\ntype CaptchaResponseType = {\r\n    url: string\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__snK0W\",\"selectedPage\":\"Users_selectedPage__1A2Tj\",\"pages\":\"Users_pages__r5DZK\"};","export default __webpack_public_path__ + \"static/media/ava.485fc51f.png\";","import React from \"react\";\r\nimport {Field, WrappedFieldProps} from \"redux-form\";\r\nimport s from './FormsControls.module.css'\r\nimport {FieldValidatorType, required} from \"../../../utils/validators/validators\";\r\n\r\n\r\nexport const FormControl: React.FC<WrappedFieldProps> = ({input, meta: {touched, error}, children}) => {\r\n    const hasError = touched && error;\r\n    return (\r\n        <div className={s.formControl + ' ' + (hasError ? s.error : '')}>\r\n            <div>\r\n                {children}\r\n            </div>\r\n            {hasError && <span>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Textarea: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, ...restProps} = props\r\n    return <FormControl {...props}><textarea {...input} {...restProps} {...props} /></FormControl>\r\n}\r\n\r\nexport const Input: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, ...restProps} = props\r\n    return <FormControl {...props}><input {...input} {...restProps} /></FormControl>\r\n}\r\n\r\n//todo: need to fix label here for my style\r\nexport const createField = (placeholder: string | null,\r\n                            name: string,\r\n                            validators: FieldValidatorType[],\r\n                            component: React.FC<WrappedFieldProps>,\r\n                            props = {},\r\n                            text = '') => (\r\n\r\n    <div>\r\n        <Field placeholder={placeholder}\r\n               name={name}\r\n               validate={validators}\r\n               component={component}\r\n               {...props}\r\n        /> {text}\r\n    </div>\r\n)\r\n\r\n","import React from 'react';\r\nimport s from './FriendsItem.module.scss'\r\n\r\ntype FriendItemType = {\r\n  id: number\r\n  name: string,\r\n  avatar: string\r\n}\r\n\r\nexport const FriendItem:React.FC<FriendItemType> = (props) => {\r\n  return <div className={s.friendContainer}>\r\n    <img src={props.avatar} alt=\"\" className={s.avatar}/>\r\n    {props.name}\r\n  </div>\r\n}","import React from 'react';\r\nimport s from \"../Sidebar.module.scss\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../../redux/redux-store\";\r\nimport {ProfileType} from \"../../../types/types\";\r\nimport {FriendItem} from \"./FriendItem/FriendItem\";\r\nimport {FriendsType} from \"../../../redux/sidebar-reducer\";\r\n\r\ntype PropsType = {\r\n    friends: Array<FriendsType>\r\n}\r\n\r\nexport const Friends: React.FC<PropsType>= (props) => {\r\n    const profile = useSelector<AppRootStateType, ProfileType | null>(store => store.profilePage.profile)\r\n    let FriendsElements = props.friends.map(f => <FriendItem key={f.id} id={f.id} name={f.name} avatar={f.avatar}/>)\r\n    if (profile) {\r\n        return <div>\r\n            <div className={s.friends}>\r\n                <h3>Friends</h3>\r\n                <div className={s.friendsContainer}>{FriendsElements}</div>\r\n            </div>\r\n        </div>\r\n    } else return <div></div>\r\n}","import {AppRootStateType} from '../../redux/redux-store';\r\nimport {connect} from 'react-redux';\r\nimport {InitialStateSidebarType} from '../../redux/sidebar-reducer';\r\nimport {Sidebar} from './Sidebar';\r\n\r\ntype MapStatePropsType = {\r\n  sidebar: InitialStateSidebarType\r\n}\r\n\r\nexport type SidebarPropsType = MapStatePropsType\r\n\r\nconst mapStateToProps = (state: AppRootStateType): MapStatePropsType => {\r\n  return {\r\n    sidebar: state.sidebar\r\n  }\r\n}\r\n\r\nexport const SidebarContainer = connect(mapStateToProps)(Sidebar)","import React from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\nimport s from './Sidebar.module.scss'\r\nimport {SidebarPropsType} from './SidebarContainer';\r\nimport profileImg from '../../assets/images/sidebar/user.png'\r\nimport dialogsImg from '../../assets/images/sidebar/comment.png'\r\nimport usersImg from '../../assets/images/sidebar/group.png'\r\nimport newsImg from '../../assets/images/sidebar/newspaper.png'\r\nimport musicImg from '../../assets/images/sidebar/musical-note.png'\r\nimport settingsImg from '../../assets/images/sidebar/settings.png'\r\nimport {Friends} from \"./Friends/Friends\";\r\n\r\n\r\nexport const Sidebar: React.FC<SidebarPropsType> = (props) => {\r\n    return (\r\n        <div className={s.navbarContainer}>\r\n            <nav className={s.nav}>\r\n                <div className={s.item}>\r\n                    <NavLink to=\"/profile\" className={s.navLink} activeClassName={s.active}>\r\n                        <img src={profileImg} alt=\"\"/>Profile\r\n                    </NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to=\"/dialogs\" className={s.navLink} activeClassName={s.active}>\r\n                        <img src={dialogsImg} alt=\"\"/>Dialogs\r\n                    </NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to='/users' className={s.navLink} activeClassName={s.active}>\r\n                        <img src={usersImg} alt=\"\"/>Users\r\n                    </NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to='/news' className={s.navLink} activeClassName={s.active}>\r\n                        <img src={newsImg} alt=\"\"/>News\r\n                    </NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to='/music' className={s.navLink} activeClassName={s.active}>\r\n                        <img src={musicImg} alt=\"\"/>Music\r\n                    </NavLink>\r\n                </div>\r\n                <div className={s.item}>\r\n                    <NavLink to='/settings' className={s.navLink} activeClassName={s.active}>\r\n                        <img src={settingsImg} alt=\"\"/>Settings\r\n                    </NavLink>\r\n                </div>\r\n            </nav>\r\n            <Friends friends={props.sidebar.friends}/>\r\n        </div>\r\n    )\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA9gAAAPYBa0iqmwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIJSURBVFiFvdc7a1RRFAXg78QQRBODCmnULgmojcFXEAshjRY2ggF/gxDstBD8FUmfys7GNmATBIOVYgSLNNEiZBIfxEh85FjMGRjjzH3M3JkDixlm9l5rcc7Ze98bYozKrBDCedzBpQR4nfAsxviuFGGMsRAwiMfYQ2yDvRQzWJi3oPgwVjKED2IFw1UaWCgh3sBCJQYwg/0ODOxjpgoDSx2IN7CUxx+yqiCEEPAZo1kXOWN9xfGYITKQQzDehbiUO54VkGfgdBfihTjyjuAEtro0cDLGuN3uz8wdSIlrXYivZYnnGkjrRRcG8nMLlOEYNpUvwU2MVdUJZzswMFtZK04m5rBbQHgXc4V5iwYmExNYzhBfxkQZzswybLdCCGe0eB6IMa6X5srpA0O4jXv4hPkY44ccc5O4j1N4iucxxp9tEzK2el69CTVv8W8sYhojTfEj6bfFFNOcs5W4Wh5NK/Ep1ORftoiPCUVia7iYaQBX1Kdfp+M3D19wraUBXMW3Hoo3sIPr/xhQb8lv+yDewCoONRuY7qN4A1PNBobwpo/iLzFw8A5cSOfTa/FtTLargpv41UPxH5ouYLs+cFf220+n+I5bhYYRbmCjQvF1XC41DXEUj/zfjstgAw9wuONxjGN4ov6MX1S4hoc4Utk4DiGMqrfqcwln0+cfvFdvLqvp+6sY404R3r9OxtlBlOX8kQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAH3SURBVFiFzZfPK0RRFMc/fhcxbPkLbMgOIRqjKAvZyL9gy1+hhImisSJLycoSsfA7hT9AlF9DZIMyFudc87zmmffe3FdOnW7v3HvP9zP33nPfG/jnVgz0AjPAOXAPfAFp4AiYBzp1nHXrB86AjA+/BOK2hEuBRZ/Cbl/U+aGtHNgMKW58DagIC5AsUNx4Moz4oCXxDHJQE0EBjiwCZIDTIOJxy+LG2/MJm/odCEIbwEa19awMA9AVEUCbto3AAlDmNTBNNFuQ1vwxfd7AYzVeIwJ41/xljthcLoDniACuNX+dK95nhM0ZuMhFZcFutK13xSeBIifASUQAO9o2u+JNaIkagNWIANa1zXUrjrgDh9jd/wNkmauApxz9e26AbcsAPZp3zKP/0SleA3xYFJ/UvDHgzmPMixNg2KL4OlCieZf/GHfvBFiyJL5A9qYbzzN21wlw5er8RM6E31f0Idk9B5hAvgn+mjPlBNhBbq0Ush0xR18rMKsiDwp3A+wje92BXipALbDiE7oNi1aJnPZbn+LHZqLfL9hSoAX55XdANdCA3HAJYIjfq5bP3gKM/TFbH6wZpOSDAAOyCmsWIYaDAhiIWfKfcD+eCgNgLI68Qf0InSEl/emKXxUCYKwLmEZK8pHff1yTQDfZEo0hy55CSn7LBkDB9g0rdORSmQu65AAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3QAAAN0BcFOiBwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJVSURBVFiF7ZYxTxRRFIW/O4wEkNhYUoCAFCQUBmgIArEwIaGy2YRCQoOBX8Cv4CdQkBA0VnTEqM0mVpZmY5bgSmEWsZACg6jkWnDfujv7ZnZmNzqNN7mZZO455565783ME1Ulzwhy7Q6E7ZBEpAeYAabs1lvgjap+zyymqpkSmAUOAY3kITCbWS9j8zngytPc5RUw91cMAL3AUUJzl0dAb1rdLJtwBhhOgRs2bKpoMiAifSIyLyIFERmpK01FsQlRw4rIiGnNi0hfEzIy5iWgSuNId4FbwAatx+9ywzi7kftVYMm7B4AJ4DJGcAcYzWBg1Di+2iUw4TOw10L0DlBO0bxs2CTMnm8T3mtan8aYBh4BpwmYU8NMt9Cq9ao38KUF6VhV3wELQMVTrwALhjluofWnV90SbBI/ss9AV2TDjgFPLMcitS7jxOltOqy4v6GIhMBr4H7E7SfgoaqWROQGMA4MARLBKfARKKnqTxEZB14AAxFcEXigqr8aJmBGQptEEXgPPAMGrbYCnCU8lcszYMU4g8BT0yqadpj5Uwysp2gczfVM/wKgAOwDH4ATG303cBs4b8PAuXG7TevEtPeBQoMBYNsjULbaYhvNXS6ahu/7sa2qBCKyDKzSHO5Vu+uppQ3H9b22qyKyHABrMWS1ayfHNsfVmPpaAEx20KDTmAyA/hwN9Od+Kv5vICB+h/6L0AA4yNHAQQBsAReeolueHx00cFzfUl8AW6GqvhSRAeAx10cpF1W7Puf6l3ozY/NvxgV4BZTqahVgR1W/1s4DeUXub8Fvtlx/5O0ZI1YAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7QAAAO0Bq2+TWQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGmSURBVFiFxdc9axRRFMbx3xkEMYgmFtqktrIIBoR0ithZmtYm2Fim0C/gNxC0Eb+AiI2m8w0shMVKEG0l0UYQbIygHouZhWW5KzszzO4Dp5j7Ms9/7j3nDhce4C9yoHiNKjOVwsDm4zg7C6BCGF5V645FaekAR+YY8wNv1XtZ0gbODAmwlZkfZnVGxAkc4HgXgHm2YCsi/peoG1jpYk5dAbOWdmglHi4TAHJRADewP/G8iTuUk/An7uJrB6OTuInTU+1vMvPj+GEypUoAzzLzdgfz8ctXcGve8SWAyxGxoy6ttlrDtTYTSgBr6j/kQrT0o7gE8AnrmRltA6fwoi/A58zssv8y83vzAXOrlANXIuK97kl4oS8AnGticJUA/uCJ7iuwjWN9AJ5m5nYHcxAR37DbB2AzIi7hSwf/VVxsM6EEsK5lKfXR0g+i0grs47ruW3AP5/sAvMvMlx3MQUS8agvwC0cn2q5GxCP9ynBaq4VxGm8jw1/N7k/dB5837SPqmh0a4DceY2fCPBtvFfYWADEde6jGS1I1NCMcDmh62Hjsaq7s/wBaFEE2np7rpAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABIwAAASMBckF33gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGYSURBVFiFxdbBSxVRFMfxT2JBabZz4apN7hSKNmmrBGmXu4TAwPAfcNcf4K5FtA7aRPgHuFAK2rXQhaKQrRJpI5FgUokWb1rcNzA9ZsZp3sybHxxmuPdwzpdz7z33Ul7X8BHbuNpFnNKaRNS2hSYA7iYA9jBUJkhfRTDX8RIXKopXSMkKxPYKl5oEiLCDsSYBIvzEkyYBYnuNwSYBInzIg6jqFOTpDp7XEbhoBSK0cDstSC8qQOgPc3UCHBbweVAnwAwe4VuOz4iUTlkVQAtvcAsbGT79uFIXQKwvmMZuytx3oUHVCgBHeCxUJantNOe6TsEGVjrG3vcSgNCGk1ruNcBe4n9N+r7oSslOOJEyv9qeO8PNrCB1VuBr+/sUm1lO5z2hLmMW93EDv/EZ77CPt22/SeHWS6oPwzj4H+qkJoR1zLpgTuQvQVcax4+c5J1WGiBrDzzDQNmg3QJcxL1eJM8C6M8Yz9NxBSz/aF3x9T8QqlappvCnIMB81cljPRRKm5X4FIt1JY81giVsCcfyFz7hBUarSPAXsfaW5vbkQOIAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA3QAAAN0BcFOiBwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHGSURBVFiFxZe/TgJBEMZ/B/1paKSBhIIg2uEfNIZGOx8BE5PzDazRJzAxMT4IjVbaUUJNCL6AURNpSBQNa8GeHOfdunscxyTT7H3zzXe3uzNzCCHQdSAHdAER4l0gZ8KZwszOgLLieVlitM1UwHpMmMgCijFhphawz9tANWDdAgaE77/rA8AKiK8Cu3/WfaBTYCyJesA5kAH2gbZGctfbMiYjOXqeZ06gAGAFeAkg+/CIMvGxjPWvvwGZIAHXEZJE9dsZAUAJGCUo4BvY9Aq4TzC5648yN0cRCYZAS/owIsdxCtjDzAZMqp0thKgJIWqALdcGhlxbAGtAX1PxO5BX9Iq8xOhw9YGsG2gDTY0gJyy5R4SjwdOUXxB/cEMRNATSGgLSqM9EQ1UJC4rAlkHbbil4CvO049jNL6CuwFYsy0r/RygxFQVkNsfSDyGQZZnXELjQDPCKcPDcCCYn3zFI7volwKFhkPdazl2K3Te4i0gwjz94u2ER+Eww+Rew4R9IrhIUcBM0EdnAcwA47pHsFVgNK8V1FjuUjoCT0F4gReywmLH8ACgpx3KNKtfRENAx4TRtRk8xYX7NVEAvJszUDLcg9t/zH72YU/7LxNChAAAAAElFTkSuQmCC\"","import React from 'react';\r\n\r\nexport const News = () => {\r\n  return (\r\n    <div>\r\n      in progress...\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport const Music = () => {\r\n  return (\r\n    <div>\r\n      in progress...\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\n\r\nexport const Settings = () => {\r\n  return (\r\n    <div>\r\n      in progress...\r\n    </div>\r\n  )\r\n}","// todo: need to fix any\r\nexport const updateObjectInArray = (items: any, itemId: any, objPropName: any, newObjProps: any) => {\r\n    return items.map((u: any) => {\r\n        if (u[objPropName] === itemId) {\r\n            return {...u, ...newObjProps}\r\n        }\r\n        return u;\r\n    })\r\n}","import {Dispatch} from \"redux\";\r\nimport {usersAPI} from \"../api/api\";\r\nimport {UserType} from \"../types/types\";\r\nimport {updateObjectInArray} from \"../utils/object-helpers\";\r\n\r\nconst initialState = {\r\n    users: [] as Array<UserType>,\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: [] as Array<number>, //array of users ids\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\nexport const usersReducer = (state = initialState, action: UsersActionTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {followed: true})\r\n            }\r\n        case 'UNFOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {followed: false})\r\n            }\r\n        case 'SET-USERS': {\r\n            return {...state, users: action.users}\r\n        }\r\n        case 'SET-CURRENT-PAGE': {\r\n            return {...state, currentPage: action.currentPage}\r\n        }\r\n        case 'SET-TOTAL-USERS-COUNT': {\r\n            return {...state, totalUsersCount: action.count}\r\n        }\r\n        case 'TOGGLE-IS-FETCHING': {\r\n            return {...state, isFetching: action.isFetching}\r\n        }\r\n        case \"TOGGLE-IS-FOLLOWING-PROGRESS\":\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const followSuccess = (userId: number) => ({type: 'FOLLOW', userId} as const)\r\nexport const unfollowSuccess = (userId: number) => ({type: 'UNFOLLOW', userId} as const)\r\nexport const setUsers = (users: Array<UserType>) => ({type: 'SET-USERS', users} as const)\r\nexport const setCurrentPage = (currentPage: number) => ({type: 'SET-CURRENT-PAGE', currentPage} as const)\r\nexport const setTotalUsersCount = (totalUsersCount: number) => ({\r\n    type: 'SET-TOTAL-USERS-COUNT',\r\n    count: totalUsersCount\r\n} as const)\r\nexport const toggleIsFetching = (isFetching: boolean) => ({type: 'TOGGLE-IS-FETCHING', isFetching} as const)\r\nexport const toggleFollowingProgress = (isFetching: boolean, userId: number) => ({\r\n    type: 'TOGGLE-IS-FOLLOWING-PROGRESS',\r\n    isFetching,\r\n    userId\r\n} as const)\r\n\r\nexport const requestUsers = (currentPage: number, pageSize: number) => {\r\n    return async (dispatch: Dispatch<UsersActionTypes>) => {\r\n        dispatch(toggleIsFetching(true))\r\n        dispatch(setCurrentPage(currentPage))\r\n\r\n        let data = await usersAPI.getUsers(currentPage, pageSize);\r\n        dispatch(toggleIsFetching(false))\r\n        dispatch(setUsers(data.items))\r\n        dispatch(setTotalUsersCount(data.totalCount))\r\n    }\r\n}\r\n\r\n//todo: need to fix any\r\nconst followUnfollowFlow = async (dispatch: Dispatch<UsersActionTypes>, userId: number, apiMethod: any, actionCreator: any) => {\r\n    dispatch(toggleFollowingProgress(true, userId));\r\n    let response = await apiMethod(userId)\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(actionCreator(userId))\r\n    }\r\n    dispatch(toggleFollowingProgress(false, userId))\r\n}\r\n\r\nexport const follow = (userId: number) => {\r\n    return async (dispatch: Dispatch<UsersActionTypes>) => {\r\n        followUnfollowFlow(dispatch, userId, usersAPI.follow.bind(usersAPI), followSuccess)\r\n    }\r\n}\r\n\r\nexport const unfollow = (userId: number) => {\r\n    return async (dispatch: Dispatch<UsersActionTypes>) => {\r\n        followUnfollowFlow(dispatch, userId, usersAPI.unfollow.bind(usersAPI), unfollowSuccess)\r\n    }\r\n}\r\n\r\nexport type UsersActionTypes = ReturnType<typeof followSuccess> | ReturnType<typeof unfollowSuccess> |\r\n    ReturnType<typeof setUsers> | ReturnType<typeof setCurrentPage> | ReturnType<typeof setTotalUsersCount> |\r\n    ReturnType<typeof toggleIsFetching> | ReturnType<typeof toggleFollowingProgress>;","export default __webpack_public_path__ + \"static/media/user.b9b5b31c.png\";","import React from 'react';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport userPhoto from \"../../assets/images/user.png\";\r\nimport s from \"./Users.module.scss\";\r\nimport {PhotosType} from \"../../types/types\";\r\n\r\n\r\ntype UserType = {\r\n    id: number\r\n    photos: PhotosType\r\n    name: string\r\n    status: string | null\r\n}\r\n\r\ntype UserPropsType = {\r\n    user: UserType\r\n    followingInProgress: Array<number>\r\n    followed: boolean\r\n    unfollow: (userId: number) => void\r\n    follow: (userId: number) => void\r\n}\r\n\r\nexport const User: React.FC<UserPropsType> = ({user, followed, followingInProgress, unfollow, follow}) => {\r\n    return (<div>\r\n        <div key={user.id}>\r\n            <div>\r\n                <div>\r\n                    <NavLink to={'/profile/' + user.id}>\r\n                        <img src={user.photos.small !== null ? user.photos.small : userPhoto} alt={'userPhoto'}\r\n                             className={s.userPhoto}/>\r\n                    </NavLink>\r\n                </div>\r\n                <div>\r\n                    {followed\r\n                        ? <button disabled={followingInProgress\r\n                            .some((id: number) => id === user.id)} onClick={() => {\r\n                            unfollow(user.id)\r\n                        }}>Unfollow</button>\r\n                        : <button disabled={followingInProgress.some((id: number) => id === user.id)} onClick={() => {\r\n                            follow(user.id)\r\n                        }}>Follow</button>}\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div>\r\n                    <div>{user.name}</div>\r\n                    <div>{user.status}</div>\r\n                    <div>id: {user.id}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>)\r\n}","import React, {useState} from 'react';\r\nimport s from \"./Paginator.module.scss\";\r\nimport cn from \"classnames\";\r\n\r\ntype PropsType = {\r\n    onPageChanged: (p: number) => void\r\n    currentPage: number\r\n    pageSize: number\r\n    totalItemsCount: number\r\n    portionSize?: number\r\n}\r\n\r\nexport const Paginator: React.FC<PropsType> = ({\r\n                                                   totalItemsCount,\r\n                                                   pageSize,\r\n                                                   currentPage,\r\n                                                   onPageChanged,\r\n                                                   portionSize = 15 /*порция которая видна в пагинации*/,\r\n                                               }) => {\r\n\r\n    let pagesCount = Math.ceil(totalItemsCount / pageSize); //количество страниц (всех!) до пагинатора\r\n\r\n    let pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i);\r\n    }\r\n\r\n    let portionCount = Math.ceil(pagesCount / portionSize) // количество порций по 10 страниц\r\n    let [portionNumber, setPortionNumber] = useState(1)\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\r\n    let rightPortionPageNumber = portionNumber * portionSize\r\n\r\n    return <div className={s.paginator}>\r\n        {portionNumber > 1 &&\r\n            <button onClick={() => {\r\n                setPortionNumber(portionNumber - 1)\r\n            }}>PREV </button>}\r\n\r\n        {pages\r\n            .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n            .map((p) => {\r\n                return <span key={p} className={cn({[s.selectedPage]: currentPage === p}, s.circle)}\r\n                            onClick={() => {\r\n                                onPageChanged(p)\r\n                            }}>{p}</span>\r\n            })}\r\n        {portionCount > portionNumber &&\r\n            <button onClick={() => {\r\n                setPortionNumber(portionNumber + 1)\r\n            }}>NEXT</button>}\r\n    </div>\r\n\r\n\r\n}","import React from 'react';\r\nimport {UsersPropsType} from \"./UsersContainer\";\r\nimport {User} from \"./User\";\r\nimport {Paginator} from \"../common/Paginator/Paginator\";\r\n\r\ntype UsersAdditionalPropsType = {\r\n    onPageChanged: (p: number) => void\r\n}\r\n\r\ntype UsersPropsTypeUnion = UsersAdditionalPropsType & UsersPropsType\r\n\r\nexport const Users: React.FC<UsersPropsTypeUnion> = ({\r\n                                                         currentPage,\r\n                                                         totalUsersCount,\r\n                                                         pageSize,\r\n                                                         onPageChanged,\r\n                                                         users,\r\n                                                         ...props\r\n                                                     }) => {\r\n    return <div>\r\n        <Paginator currentPage={currentPage} onPageChanged={onPageChanged}  pageSize={pageSize}\r\n                   totalItemsCount={totalUsersCount}/>\r\n        <div>\r\n            {\r\n                users.map(u => <User key={u.id}\r\n                                     user={u}\r\n                                     followingInProgress={props.followingInProgress}\r\n                                     followed={u.followed}\r\n                                     unfollow={props.unfollow}\r\n                                     follow={props.follow}\r\n                    />\r\n                )\r\n            }\r\n        </div>\r\n    </div>\r\n}","import {AppRootStateType} from \"./redux-store\";\r\nimport {createSelector} from \"reselect\";\r\n\r\nconst getUsersSelector = (state: AppRootStateType) => {\r\n    return state.usersPage.users\r\n}\r\n\r\nexport const getUsers = createSelector(getUsersSelector,\r\n    (users) => {\r\n    return users.filter(u => true)\r\n})\r\n\r\nexport const getPageSize = (state: AppRootStateType) => {\r\n    return state.usersPage.pageSize;\r\n}\r\nexport const getTotalUsersCount = (state: AppRootStateType) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\nexport const getCurrentPage = (state: AppRootStateType) => {\r\n    return state.usersPage.currentPage;\r\n}\r\nexport const getIsFetching = (state: AppRootStateType) => {\r\n    return state.usersPage.isFetching;\r\n}\r\nexport const getFollowingInProgress = (state: AppRootStateType) => {\r\n    return state.usersPage.followingInProgress\r\n}\r\n\r\nexport const countSomethingDifficult = (state: AppRootStateType) => {\r\n    // for ... math ... big arrays\r\n    let count = 23\r\n    return count\r\n}","import {connect} from 'react-redux';\r\nimport {\r\n    follow, requestUsers,\r\n    setCurrentPage,\r\n    setUsers,\r\n    toggleFollowingProgress,\r\n    unfollow,\r\n} from '../../redux/users-reducer';\r\nimport {AppRootStateType} from '../../redux/redux-store';\r\nimport React from \"react\";\r\nimport {Users} from \"./Users\";\r\nimport {Preloader} from \"../common/Preloader/Preloader\";\r\nimport {compose} from \"redux\";\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalUsersCount, getUsers\r\n} from \"../../redux/users-selectors\";\r\nimport {UserType} from \"../../types/types\";\r\n\r\n\r\ntype MapStatePropsType = {\r\n    currentPage: number\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    users: Array<UserType>\r\n    followingInProgress: Array<number>\r\n}\r\ntype MapDispatchPropsType = {\r\n    follow: (userId: number) => void\r\n    unfollow: (userId: number) => void\r\n}\r\n\r\ntype MapStateToPropsTypeAPI = {\r\n    isFetching: boolean\r\n}\r\n\r\ntype OwnPropsType = {\r\n    setCurrentPage: (pageNumber: number) => void\r\n    requestUsers: (currentPage: number, pageSize: number) => void\r\n}\r\n\r\nexport type UsersPropsType = MapStatePropsType & MapDispatchPropsType\r\n\r\ntype PropsType =  UsersPropsType & OwnPropsType & MapStateToPropsTypeAPI\r\n\r\nclass UsersContainer extends React.Component<PropsType> {\r\n    componentDidMount() {\r\n        const {currentPage, pageSize} = this.props\r\n        this.props.requestUsers(currentPage, pageSize);\r\n    }\r\n\r\n    onPageChanged = (pageNumber: number) => {\r\n        const {pageSize} = this.props\r\n        this.props.requestUsers(pageNumber, pageSize)\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader/> : null}\r\n            <Users totalUsersCount={this.props.totalUsersCount}\r\n                   pageSize={this.props.pageSize}\r\n                   currentPage={this.props.currentPage}\r\n                   onPageChanged={this.onPageChanged}\r\n                   users={this.props.users}\r\n                   follow={this.props.follow}\r\n                   unfollow={this.props.unfollow}\r\n                   followingInProgress={this.props.followingInProgress}\r\n            />\r\n        </>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppRootStateType): MapStatePropsType & MapStateToPropsTypeAPI => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect(mapStateToProps,\r\n        {follow, unfollow, setUsers, setCurrentPage, toggleFollowingProgress, requestUsers}),\r\n)(UsersContainer)\r\n\r\n","import React from 'react';\r\nimport s from './Header.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {HeaderPropsType} from \"./HeaderContainer\";\r\n\r\n\r\nexport const Header: React.FC<HeaderPropsType> = (props) => {\r\n    return <header className={s.header}>\r\n        {/*<img src={logo} alt=\"\"/>*/}\r\n        <div className={s.logo}>BrightNet</div>\r\n        <div className={s.loginBlock}>\r\n            {props.isAuth\r\n                ? <div>{props.login} - <button onClick={props.logout}>Log out</button></div>\r\n                : <NavLink to={'/login'}>\r\n                    <button>Login</button>\r\n                </NavLink>}\r\n        </div>\r\n    </header>\r\n}","import {Dispatch} from \"redux\";\r\nimport {authAPI, ResultCodesEnum, securityAPI} from \"../api/api\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppRootStateType} from \"./redux-store\";\r\nimport {FormAction, stopSubmit} from \"redux-form\";\r\n\r\nconst initialState = {\r\n    id: null as number | null,\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false as boolean,\r\n    captchaUrl: null as null | string, // if null, then captcha is not required\r\n};\r\n\r\ntype InitialStateType = typeof initialState;\r\n\r\nexport const authReducer = (state = initialState, action: AuthActionTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"bright-net/auth/GET_CAPTCHA_URL_SUCCESS\":\r\n        case 'bright-net/auth/SET-USER-DATA':\r\n        {\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setAuthUserData = (id: number | null, login: string | null, email: string | null, isAuth: boolean) => ({\r\n    type: 'bright-net/auth/SET-USER-DATA', payload: {id, login, email, isAuth}\r\n} as const)\r\n\r\nexport const getCaptchaUrlSuccess = (captchaUrl: string) => ({\r\n    type: 'bright-net/auth/GET_CAPTCHA_URL_SUCCESS', payload: {captchaUrl}\r\n} as const)\r\n\r\nexport const getAuthUserData = () => async (dispatch: Dispatch<AuthActionTypes>) => {\r\n    let response = await authAPI.me();\r\n    // success, get auth data\r\n    if (response.data.resultCode === ResultCodesEnum.Success) {\r\n        let {id, login, email} = response.data.data\r\n        dispatch(setAuthUserData(id, login, email, true))\r\n    }\r\n}\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string | null): ThunkType => async (dispatch) => {\r\n    let response = await authAPI.login(email, password, rememberMe, captcha);\r\n    if (response.data.resultCode === ResultCodesEnum.Success) {\r\n        dispatch(getAuthUserData())\r\n    }  else {\r\n        if (response.data.resultCode === ResultCodesEnum.CaptchaRequired) {\r\n            dispatch(getCaptchaUrl())\r\n        }\r\n        let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Some error'\r\n        dispatch(stopSubmit('login', {_error: message}))\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    const response = await securityAPI.getCaptchaUrl()\r\n    const captchaUrl = response.data.url\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl))\r\n}\r\n\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    let response = await authAPI.logout();\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false))\r\n    }\r\n}\r\n\r\ntype AuthActionTypes =\r\n    | ReturnType<typeof setAuthUserData>\r\n    | ReturnType<typeof getCaptchaUrlSuccess>\r\ntype ThunkType = ThunkAction<void, AppRootStateType, unknown, AuthActionTypes | FormAction>","import React from 'react';\r\nimport {Header} from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppRootStateType} from \"../../redux/redux-store\";\r\nimport {logout} from \"../../redux/auth-reducer\";\r\n\r\ntype MapStatePropsType = {\r\n  isAuth: boolean\r\n  login: string | null\r\n}\r\ntype MapDispatchPropsType = {\r\n  logout: () => void\r\n}\r\nexport type HeaderPropsType = MapStatePropsType & MapDispatchPropsType\r\n\r\nclass HeaderContainer extends React.Component<HeaderPropsType> {\r\n\r\n  render() {\r\n    return <Header {...this.props} />\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: AppRootStateType): MapStatePropsType => ({\r\n  isAuth: state.auth.isAuth,\r\n  login: state.auth.login\r\n});\r\n\r\nexport default connect(mapStateToProps, {logout})(HeaderContainer)\r\n\r\n","import React from 'react';\r\nimport {InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {createField, Input} from \"../common/FormsControls/FormsControls\";\r\nimport {required} from \"../../utils/validators/validators\";\r\nimport {connect, useSelector} from \"react-redux\";\r\nimport {login} from \"../../redux/auth-reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {AppRootStateType} from \"../../redux/redux-store\";\r\nimport style from './../common/FormsControls/FormsControls.module.css'\r\n\r\ntype MapStatePropsType = {\r\n    isAuth: boolean\r\n    captchaUrl: null | string\r\n}\r\ntype MapDispatchPropsType = {\r\n    login: (email: string, password: string, rememberMe: boolean, captcha: string | null) => void\r\n}\r\ntype PropsType = MapStatePropsType & MapDispatchPropsType\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormValuesType>> = ({handleSubmit, error}) => {\r\n\r\n    const captchaUrl = useSelector<AppRootStateType, null | string>(state => state.auth.captchaUrl)\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n\r\n            {createField('Email', 'email', [required], Input)}\r\n            {createField('Password', 'password', [required], Input, {type: 'password'})}\r\n            {createField(null, 'rememberBe', [], Input, {type: 'checkbox'}, 'remember me')}\r\n\r\n            {captchaUrl && <img src={captchaUrl} alt={'captchaUrl'}/>}\r\n            {captchaUrl && createField('Symbols from image', 'captcha', [required], Input, {})}\r\n\r\n            {error && <div className={style.formSummaryError}>\r\n                {error}\r\n            </div>\r\n            }\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\ntype LoginFormValuesType = {\r\n    email: string\r\n    password: string\r\n    rememberMe: boolean\r\n    captcha: string | null\r\n}\r\nconst LoginReduxForm = reduxForm<LoginFormValuesType>({form: 'login'})(LoginForm)\r\n\r\nconst Login: React.FC<PropsType> = (props) => {\r\n    const onSubmit = (formData: LoginFormValuesType) => {\r\n        props.login(formData.email, formData.password, formData.rememberMe, formData.captcha)\r\n    }\r\n\r\n    if (props.isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n\r\n    return <div>\r\n        <h1>Login</h1>\r\n        <LoginReduxForm onSubmit={onSubmit}/>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state: AppRootStateType): MapStatePropsType => ({\r\n    captchaUrl: state.auth.captchaUrl,\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect(mapStateToProps, {login})(Login)\r\n\r\n// todo: redirect after logout to login form","import {ThunkAction} from \"redux-thunk\";\r\nimport {AppRootStateType} from \"./redux-store\";\r\nimport {getAuthUserData} from \"./auth-reducer\";\r\n\r\ntype InitialStateType = {\r\n    initialized: boolean\r\n    globalError: null | string\r\n}\r\ntype AppActionTypes = ReturnType<typeof initializedSuccess>\r\ntype ThunkType = ThunkAction<void, AppRootStateType, unknown, AppActionTypes>\r\n\r\nconst initialState: InitialStateType = {\r\n    initialized: false,\r\n    globalError: null\r\n};\r\n\r\n\r\nexport const appReducer = (state= initialState, action: AppActionTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case \"INITIALIZED-SUCCESS\": {\r\n            return {\r\n                ...state,\r\n                initialized: true,\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const initializedSuccess = () => ({type: 'INITIALIZED-SUCCESS'} as const)\r\n\r\nexport const initializeApp = (): ThunkType => (dispatch) => {\r\n    let promise = dispatch(getAuthUserData())\r\n    Promise.all([promise])\r\n        .then(() => {\r\n            dispatch(initializedSuccess());\r\n    });\r\n}","import ava from '../assets/images/ava.png'\r\n\r\nexport type FriendsType = {\r\n  id: number\r\n  name: string,\r\n  avatar: string\r\n}\r\nlet initialState = {\r\n  friends: [\r\n    { id: 1, name: 'Liza', avatar: ava},\r\n    { id: 2, name: 'Masha', avatar: ava},\r\n    { id: 3, name: 'Diana', avatar: ava},\r\n  ] as Array<FriendsType>\r\n}\r\n\r\nexport type InitialStateSidebarType = typeof initialState\r\n\r\nexport const sidebarReducer = (state = initialState, action: SidebarActionTypes): InitialStateSidebarType => {\r\n\r\n  return state;\r\n}\r\n\r\nexport type SidebarActionTypes = {}\r\n","import {applyMiddleware, combineReducers, compose, createStore} from 'redux';\r\nimport {profileReducer} from \"./profile-reducer\";\r\nimport {dialogsReducer} from \"./dialogs-reducer\";\r\nimport {sidebarReducer} from \"./sidebar-reducer\";\r\nimport {usersReducer} from \"./users-reducer\";\r\nimport {authReducer} from \"./auth-reducer\";\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport {appReducer} from \"./app-reducer\";\r\n\r\n// объединяя reducer-ы с помощью combineReducers,\r\n// мы задаём структуру нашего единственного объекта-состояния\r\nconst rootReducer = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    sidebar: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n  })\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n// непосредственно создаём store\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\n// а это, чтобы можно было в консоли браузера обращаться к store в любой момент\r\n// @ts-ignore\r\nwindow.__store__ = store\r\n\r\n// определить автоматически тип всего объекта состояния\r\ntype RootReducerType = typeof rootReducer\r\nexport type AppRootStateType = ReturnType<RootReducerType>","import React, {ComponentType} from \"react\";\r\nimport {Preloader} from \"../components/common/Preloader/Preloader\";\r\n\r\nexport function withSuspense(Component: ComponentType) {\r\n\r\n    return (props: any) => {\r\n        return <React.Suspense fallback={<Preloader/>}>\r\n            <Component {...props}/>\r\n        </React.Suspense>\r\n    }\r\n}\r\n\r\n//todo: maybe need to fix any","import React from 'react';\r\nimport './App.scss';\r\nimport {HashRouter, Redirect, Route, Switch, withRouter} from 'react-router-dom';\r\nimport {SidebarContainer} from './components/Sidebar/SidebarContainer';\r\nimport {News} from './components/News/News';\r\nimport {Music} from './components/Music/Music';\r\nimport {Settings} from './components/Settings/Settings';\r\nimport UsersContainer from \"./components/Users/UsersContainer\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport Login from \"./components/Login/Login\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport {compose} from \"redux\";\r\nimport {initializeApp} from \"./redux/app-reducer\";\r\nimport {AppRootStateType, store} from \"./redux/redux-store\";\r\nimport {Preloader} from \"./components/common/Preloader/Preloader\";\r\nimport {withSuspense} from \"./hoc/withSuspense\";\r\n\r\nconst DialogsContainer = React.lazy(() =>\r\n    import('./components/Dialogs/DialogsContainer')\r\n        .then(({DialogsContainer}) => ({default: DialogsContainer})),\r\n);\r\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\r\n\r\ntype MapStateToPropsType = {\r\n    initialized: boolean\r\n}\r\ntype MapDispatchPropsType = {\r\n    initializeApp: () => void\r\n}\r\n\r\ntype AppPropsType = MapStateToPropsType & MapDispatchPropsType\r\n\r\nclass App extends React.Component<AppPropsType> {\r\n    // todo: maybe need to fix any & realize global error show\r\n    catchAllUnhandledErrors = (promiseRejectionEvent: any) => {\r\n        console.log('App catchAllUnhandledErrors: ', 'Some error occurred') // in PS99 was alert. I change it for better experience.\r\n        // and here dispatch thunk\r\n        // console.error(promiseRejectionEvent)\r\n    }\r\n    componentDidMount() {\r\n        this.props.initializeApp()\r\n        window.addEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors)\r\n    }\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"unhandledrejection\", this.catchAllUnhandledErrors)\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.initialized) {\r\n            return <Preloader/>\r\n        }\r\n        return (\r\n            <div className={'back'}>\r\n                <div className={'app-wrapper'}>\r\n                    <HeaderContainer/>\r\n                    <SidebarContainer/>\r\n                    <div className={'app-wrapper-content'}>\r\n                        <Switch>\r\n                            <Route exact path=\"/\" render={() => <Redirect to={'/profile'}/>}/>\r\n                            <Route path=\"/dialogs\" render={withSuspense(DialogsContainer)}/>\r\n                            <Route path=\"/profile/:userId?\" render={withSuspense(ProfileContainer)}/>\r\n                            <Route path=\"/news\" render={() => <News/>}/>\r\n                            <Route path=\"/music\" render={() => <Music/>}/>\r\n                            <Route path=\"/settings\" render={() => <Settings/>}/>\r\n                            <Route path=\"/users\" render={() => <UsersContainer/>}/>\r\n                            <Route path=\"/login\" render={() => <Login/>}/>\r\n                            <Route path=\"*\" render={() => <div>404 NOT FOUND</div>}/>\r\n                        </Switch>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppRootStateType) => ({\r\n    initialized: state.app.initialized\r\n})\r\n\r\nlet AppContainer = compose<React.ComponentType>(\r\n    withRouter,\r\n    connect(mapStateToProps, {initializeApp}))(App)\r\n\r\nconst SamuraiJSApp = () => {\r\n    return <HashRouter>\r\n        <Provider store={store}>\r\n            <AppContainer/>\r\n        </Provider>\r\n    </HashRouter>\r\n}\r\n\r\nexport default SamuraiJSApp","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport SamuraiJSApp from \"./App\";\r\n\r\nReactDOM.render(<SamuraiJSApp />, document.getElementById('root'));\r\n","export default __webpack_public_path__ + \"static/media/preloader.18b68e50.svg\";","import preloader from \"../../../assets/images/preloader.svg\";\r\nimport React from \"react\";\r\n\r\nexport const Preloader = () => {\r\n  return <div>\r\n    <img src={preloader} alt={'preloader'}/>\r\n  </div>\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__3UvcA\",\"error\":\"FormsControls_error__pMn5z\",\"formSummaryError\":\"FormsControls_formSummaryError__2V0IU\",\"rememberMe\":\"FormsControls_rememberMe__eDfcu\"};","export type FieldValidatorType = (value: string) => string | undefined\r\n\r\nexport const required: FieldValidatorType = (value) => {\r\n  if (value) return undefined\r\n\r\n  return 'Field is required'\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number): FieldValidatorType => (value) => {\r\n  if (value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n  return undefined;\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__3-qcO\",\"circle\":\"Paginator_circle__3N3cm\",\"selectedPage\":\"Paginator_selectedPage__1_2AI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__12eqk\",\"logo\":\"Header_logo__hRpMc\",\"loginBlock\":\"Header_loginBlock__3Jnje\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"friendContainer\":\"FriendsItem_friendContainer__26NJm\",\"avatar\":\"FriendsItem_avatar__3YGhc\"};","import {Dispatch} from \"redux\";\r\nimport {profileAPI, usersAPI} from \"../api/api\";\r\nimport {PhotosType, ProfileType} from \"../types/types\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppRootStateType} from \"./redux-store\";\r\nimport {stopSubmit} from \"redux-form\";\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst SET_USER_PROFILE = 'SET-USER-PROFILE';\r\nconst SET_STATUS = 'SET-STATUS';\r\nconst DELETE_POST = 'DELETE-POST'\r\nconst SAVE_PHOTO_SUCCESS = 'SAVE_PHOTO_SUCCESS';\r\n\r\nexport type PostsType = {\r\n    id: number\r\n    message: string\r\n    likesCount: number\r\n}\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {id: 1, message: 'I will be React Developer!', likesCount: 12},\r\n        {id: 2, message: 'It\\'s my first post', likesCount: 11},\r\n        {id: 3, message: 'Bugaga', likesCount: 5},\r\n        {id: 4, message: 'Dada', likesCount: 1}\r\n    ] as Array<PostsType>,\r\n    profile: {} as ProfileType,\r\n    status: '',\r\n    newPostText: ''\r\n}\r\n\r\nexport type InitialStateProfileType = typeof initialState\r\n\r\nexport const profileReducer = (state = initialState, action: ProfileActionTypes): InitialStateProfileType => {\r\n    switch (action.type) {\r\n        case ADD_POST: {\r\n            const newPost: PostsType = {\r\n                id: new Date().getTime(),\r\n                message: action.newPostBody,\r\n                likesCount: 0\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n                newPostText: ''\r\n            };\r\n        }\r\n        case SET_USER_PROFILE: {\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case SET_STATUS: {\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case DELETE_POST:\r\n            return {...state, posts: state.posts.filter(p => p.id != action.postId)}\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return {...state, profile: {...state.profile, photos: action.photos}}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n// Action creators\r\nexport const addPost = (newPostBody: string) => ({type: ADD_POST, newPostBody} as const)\r\nexport const setUserProfile = (profile: ProfileType) => ({type: SET_USER_PROFILE, profile} as const)\r\nexport const setStatus = (status: string) => ({type: SET_STATUS, status} as const)\r\nexport const deletePost = (postId: number) => ({type: DELETE_POST, postId} as const)\r\nexport const savePhotoSuccess = (photos: PhotosType) => ({type: SAVE_PHOTO_SUCCESS, photos} as const)\r\n\r\n//Thunks\r\nexport const getUserProfile = (userId: number | null) => async (dispatch: Dispatch<ProfileActionTypes>) => {\r\n    let response = await usersAPI.getProfile(userId);\r\n    dispatch(setUserProfile(response.data))\r\n}\r\n\r\nexport const getStatus = (userId: string) => async (dispatch: Dispatch<ProfileActionTypes>) => {\r\n    let response = await profileAPI.getStatus(userId);\r\n    dispatch(setStatus(response.data))\r\n}\r\n\r\nexport const updateStatus = (status: string) => async (dispatch: Dispatch<ProfileActionTypes>) => {\r\n    try {\r\n        let response = await profileAPI.updateStatus(status);\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(setStatus(status))\r\n        }\r\n    } catch(error) {\r\n        // todo: Maybe fix: error not seen here like in PS99. Or it is because new version.\r\n        // Here possible to do dispatch. If we do catch here, than window.addEventListener at App does not work.\r\n    }\r\n\r\n}\r\n\r\nexport const savePhoto = (file: File) => async (dispatch: Dispatch<ProfileActionTypes>) => {\r\n    let response = await profileAPI.savePhoto(file);\r\n\r\n    if (response.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.photos))\r\n    }\r\n}\r\n\r\n// todo: need to fix ts-ignore\r\nexport const saveProfile = (profile: ProfileType): AppThunk => async (dispatch, getState: () => AppRootStateType) => {\r\n    const userId = getState().auth.id\r\n    const response = await profileAPI.saveProfile(profile);\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getUserProfile(userId))\r\n    } else {\r\n        const messageText = response.data.messages[0]\r\n        const beginIndex = messageText.indexOf('>')\r\n        const endIndex = messageText.indexOf(')')\r\n        const fieldName = messageText.slice(beginIndex + 1,endIndex).toLowerCase()\r\n        // @ts-ignore\r\n        dispatch(stopSubmit('edit-profile', { 'contacts': {[fieldName]: messageText}} ))\r\n        return Promise.reject(response.data.messages[0])\r\n    }\r\n}\r\n\r\nexport type ProfileActionTypes =\r\n    | ReturnType<typeof addPost>\r\n    | ReturnType<typeof setUserProfile>\r\n    | ReturnType<typeof setStatus>\r\n    | ReturnType<typeof deletePost>\r\n    | ReturnType<typeof savePhotoSuccess>\r\n\r\n\r\nexport type ResponseFilePhotoType = {\r\n    data: {\r\n        photos: PhotosType\r\n    }\r\n    resultCode: number\r\n    messages: Array<string>\r\n}\r\n\r\ntype AppThunk = ThunkAction<void, AppRootStateType, unknown, ProfileActionTypes>\r\n\r\n"],"sourceRoot":""}